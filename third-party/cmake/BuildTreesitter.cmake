set(TS_CFLAGS "-O3 -Wall -Wextra")

ExternalProject_Add(tree-sitter
  PREFIX ${DEPS_BUILD_DIR}
  URL ${TREESITTER_URL}
  DOWNLOAD_DIR ${DEPS_DOWNLOAD_DIR}/tree-sitter
  INSTALL_DIR ${DEPS_INSTALL_DIR}
  DOWNLOAD_COMMAND ${CMAKE_COMMAND}
  -DPREFIX=${DEPS_BUILD_DIR}
  -DDOWNLOAD_DIR=${DEPS_DOWNLOAD_DIR}/tree-sitter
  -DURL=${TREESITTER_URL}
  -DEXPECTED_SHA256=${TREESITTER_SHA256}
  -DTARGET=tree-sitter
  -DUSE_EXISTING_SRC_DIR=${USE_EXISTING_SRC_DIR}
  -P ${CMAKE_CURRENT_SOURCE_DIR}/cmake/DownloadAndExtractFile.cmake
  BUILD_IN_SOURCE 1
  PATCH_COMMAND ""
  CONFIGURE_COMMAND ""
  BUILD_COMMAND ${MAKE_PRG} CC=${DEPS_C_COMPILER} CFLAGS=${TS_CFLAGS}
  INSTALL_COMMAND ${MAKE_PRG} CC=${DEPS_C_COMPILER} PREFIX=${DEPS_INSTALL_DIR} install)

list(APPEND THIRD_PARTY_DEPS tree-sitter)
